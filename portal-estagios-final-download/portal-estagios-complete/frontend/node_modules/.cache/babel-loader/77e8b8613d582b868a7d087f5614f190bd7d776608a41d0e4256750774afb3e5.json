{"ast":null,"code":"export function saveToken(token) {\n  localStorage.setItem('token', token);\n}\nexport function getToken() {\n  return localStorage.getItem('token');\n}\nexport function clearToken() {\n  localStorage.removeItem('token');\n}\nexport function authFetch(url, options = {}) {\n  const token = getToken();\n  const headers = options.headers || {};\n  if (token) headers['Authorization'] = 'Bearer ' + token;\n  headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  return fetch(url, {\n    ...options,\n    headers\n  });\n}\nexport function decodeToken(token) {\n  if (!token) return null;\n  try {\n    const parts = token.split('.');\n    if (parts.length < 2) return null;\n    const payload = parts[1].replace(/-/g, '+').replace(/_/g, '/');\n    const json = JSON.parse(decodeURIComponent(escape(atob(payload))));\n    return json;\n  } catch (e) {\n    return null;\n  }\n}\nexport function getPerfil() {\n  const token = getToken();\n  const p = decodeToken(token);\n  if (!p || !p.sub) return null;\n  const parts = p.sub.split(':');\n  return parts.length > 1 ? parts[1] : null;\n}","map":{"version":3,"names":["saveToken","token","localStorage","setItem","getToken","getItem","clearToken","removeItem","authFetch","url","options","headers","fetch","decodeToken","parts","split","length","payload","replace","json","JSON","parse","decodeURIComponent","escape","atob","e","getPerfil","p","sub"],"sources":["/workspaces/ParaMel/portal-estagios-final-download/portal-estagios-complete/frontend/src/auth.js"],"sourcesContent":["export function saveToken(token){ localStorage.setItem('token', token); }\nexport function getToken(){ return localStorage.getItem('token'); }\nexport function clearToken(){ localStorage.removeItem('token'); }\nexport function authFetch(url, options={}){\n  const token = getToken();\n  const headers = options.headers || {};\n  if(token) headers['Authorization'] = 'Bearer ' + token;\n  headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  return fetch(url, {...options, headers});\n}\n\n\nexport function decodeToken(token){\n  if(!token) return null;\n  try{\n    const parts = token.split('.');\n    if(parts.length<2) return null;\n    const payload = parts[1].replace(/-/g, '+').replace(/_/g, '/');\n    const json = JSON.parse(decodeURIComponent(escape(atob(payload))));\n    return json;\n  }catch(e){ return null; }\n}\n\nexport function getPerfil(){\n  const token = getToken();\n  const p = decodeToken(token);\n  if(!p || !p.sub) return null;\n  const parts = p.sub.split(':');\n  return parts.length>1?parts[1] : null;\n}\n"],"mappings":"AAAA,OAAO,SAASA,SAASA,CAACC,KAAK,EAAC;EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;AAAE;AACxE,OAAO,SAASG,QAAQA,CAAA,EAAE;EAAE,OAAOF,YAAY,CAACG,OAAO,CAAC,OAAO,CAAC;AAAE;AAClE,OAAO,SAASC,UAAUA,CAAA,EAAE;EAAEJ,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;AAAE;AAChE,OAAO,SAASC,SAASA,CAACC,GAAG,EAAEC,OAAO,GAAC,CAAC,CAAC,EAAC;EACxC,MAAMT,KAAK,GAAGG,QAAQ,CAAC,CAAC;EACxB,MAAMO,OAAO,GAAGD,OAAO,CAACC,OAAO,IAAI,CAAC,CAAC;EACrC,IAAGV,KAAK,EAAEU,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGV,KAAK;EACtDU,OAAO,CAAC,cAAc,CAAC,GAAGA,OAAO,CAAC,cAAc,CAAC,IAAI,kBAAkB;EACvE,OAAOC,KAAK,CAACH,GAAG,EAAE;IAAC,GAAGC,OAAO;IAAEC;EAAO,CAAC,CAAC;AAC1C;AAGA,OAAO,SAASE,WAAWA,CAACZ,KAAK,EAAC;EAChC,IAAG,CAACA,KAAK,EAAE,OAAO,IAAI;EACtB,IAAG;IACD,MAAMa,KAAK,GAAGb,KAAK,CAACc,KAAK,CAAC,GAAG,CAAC;IAC9B,IAAGD,KAAK,CAACE,MAAM,GAAC,CAAC,EAAE,OAAO,IAAI;IAC9B,MAAMC,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC,CAACI,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IAC9D,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAACP,OAAO,CAAC,CAAC,CAAC,CAAC;IAClE,OAAOE,IAAI;EACb,CAAC,QAAMM,CAAC,EAAC;IAAE,OAAO,IAAI;EAAE;AAC1B;AAEA,OAAO,SAASC,SAASA,CAAA,EAAE;EACzB,MAAMzB,KAAK,GAAGG,QAAQ,CAAC,CAAC;EACxB,MAAMuB,CAAC,GAAGd,WAAW,CAACZ,KAAK,CAAC;EAC5B,IAAG,CAAC0B,CAAC,IAAI,CAACA,CAAC,CAACC,GAAG,EAAE,OAAO,IAAI;EAC5B,MAAMd,KAAK,GAAGa,CAAC,CAACC,GAAG,CAACb,KAAK,CAAC,GAAG,CAAC;EAC9B,OAAOD,KAAK,CAACE,MAAM,GAAC,CAAC,GAACF,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI;AACvC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}